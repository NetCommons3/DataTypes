language: php

php:
  - 5.4
  - 5.5
  - 5.6

sudo: required

env:
  - NETCOMMONS_VERSION=master DB=mysql
env:
  matrix:
    - NETCOMMONS_VERSION=master DB=mysql
  global:
    - secure: "wGOfxmxP2Dhg2B/vIZPxQpm3155OejhYALLxBAKN3sUkZ1Ur0BYmBNs78QyaQAneQ1+yXmS5RTcaoyb8YWIjJlQw5g1TVppTq/Kcb/zrPqLny7F0Vv3Xhx+u4rj12ZrarwiGK+/apAUxl+Ww+FY1qM72JGHquP2zImPOevx60WKi1d1S0UGQtnWOoflUVbGMnDMBoPOY2QyejcXEyODJXKkXbITZilfKmBOpiwxInPYzPtiP14rYXOz4TPz1mfFOsz7pejB5PNU8/TDrxBZmrMWh3gKVTRHNSj48Ymz5e6Zihu/HxKd35ls8/xNLvefU+NBRN5fk/rUFxVwiBSe9hh8KyJ+dRGzs+98SS2w9J0C/mT31D1apfWUNaz5otFfyic1gtWXk2/Zp/ZUZxEycuK4uSDA9qds1bBuQ7Ac08sC+RI5chqMsUFPf5sPTLNmgAgHCzRv6fdRaxSIPi7mnDfwisurOJBqC5y8UAxjUTO9pKH4xcMerzBeThkLcI0f895BLov5P/HxSx4lp9W5iVnfRGaj8RZsz3wmo6bq/mEWKDKAdOdfokFhCIurgWsAjNhZ89MPl/dijpl3sZ7QCHHYVdKRsDlqSuZlklZ4zIY2849SQVeMa2f99PzTACVloMhdD/qPF0+lIXzEYAsm9NHHhR7jatm+JOmqc+yY/o8Q="
    - GIT_COMMITTER_NAME=s-nakajima
    - GIT_COMMITTER_EMAIL=nakajimashouhei@gmail.com
    - GIT_AUTHOR_NAME=s-nakajima
    - GIT_AUTHOR_EMAIL=nakajimashouhei@gmail.com

before_script:
  - export NETCOMMONS_BUILD_DIR=`dirname $TRAVIS_BUILD_DIR`/NetCommons3
  - git clone git://github.com/NetCommons3/NetCommons3 $NETCOMMONS_BUILD_DIR
  - cd $NETCOMMONS_BUILD_DIR
  - git checkout $NETCOMMONS_VERSION
  - travis_wait . tools/build/plugins/cakephp/travis/pre.sh
  - . tools/build/plugins/cakephp/travis/environment.sh

script:
  - . tools/build/plugins/cakephp/travis/main.sh

after_script:
  - . tools/build/plugins/cakephp/travis/post.sh

notifications:
  email:
    recipients:
      - netcommons3@googlegroups.com
    on_success: never  # default: change
    on_failure: always # default: always
